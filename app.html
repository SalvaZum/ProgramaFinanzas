<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gestor de Finanzas</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <link rel="stylesheet" href="style.css">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-light">

<!-- HEADER -->
<nav class="navbar navbar-light bg-white shadow-sm mb-4">
  <div class="container d-flex justify-content-between align-items-center">
    <h4 class="mx-auto mt-2">üí∞ Gestor de Finanzas</h4>
    <button class="btn btn-outline-danger btn-sm" data-bs-toggle="modal" data-bs-target="#logoutModal">
      Cerrar sesi√≥n
    </button>
    <div id="user-info" class="d-flex align-items-center mt-2 mx-auto" hidden>
      <img id="user-photo" class="rounded-circle" width="40">
      <span id="user-name" class="fw-semibold mx-2"></span>
    </div>
  </div>
</nav>

<div class="container">

  <!-- FORMULARIO -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <form id="form" class="row g-2">
        <div class="col-md-2">
          <select id="tipo" class="form-select">
            <option value="ingreso">Ingreso</option>
            <option value="costo">Costo</option>
            <option value="ahorro">Ahorro</option>
          </select>
        </div>

        <div class="col-md-3">
          <input id="descripcion" class="form-control" placeholder="Descripci√≥n" required>
        </div>

        <div class="col-md-2">
          <input id="monto" type="number" class="form-control" placeholder="Monto" required>
        </div>

        <div class="col-md-3">
          <select id="categoria" class="form-select" required>
            <option value="">Categor√≠a</option>
          </select>
        </div>

        <div class="col-md-2 d-grid">
          <button class="btn btn-primary">Agregar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- OBJETIVO DE AHORRO -->
  <div class="progress" style="height: 20px;">
      <div
        id="barra-progreso"
        class="progress-bar bg-success"
        style="width: 0%"
      ></div>
  </div>

  <p id="texto-progreso" class="mt-2 text-center fw-semibold"></p>

  <!-- TAB PANEL -->
  <ul class="nav nav-tabs mb-4" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home"
        type="button" role="tab">
        Estadisticas
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#historial"
        type="button" role="tab">
        Historial
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#config"
        type="button" role="tab">
        <i class="bi bi-gear"> Config</i>
      </button>
    </li>
  </ul>

  <div class="tab-content mb-5" id="TabContent">
    <div class="tab-pane fade show active" id="home" role="tabpanel">
    
    <input type="month" id="filtro-mes" class="form-control mb-3"/>

    <div class="row d-flex justify-content-center align-items-center">
      <!-- RESUMEN -->
      <div class="row g-3 mb-4 col-md-6 col-sm-12 ">
        <div class="col-md-6">
          <div class="card resumen ingreso">
            <h6>Ingresos</h6>
            <p id="total-ingresos">$0</p>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card resumen costo">
            <h6>Costos</h6>
            <p id="total-costos">$0</p>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card resumen ahorro">
            <h6>Ahorros</h6>
            <p id="total-ahorros">$0</p>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card resumen balance">
            <h6>Balance <span class="text-muted" data-bs-toggle="tooltip" title="Ingresos menos costos y ahorros del mes seleccionado" style="cursor: pointer;">‚ÑπÔ∏è</span></h6>
            <p id="balance-total">$0</p>
          </div>
        </div>
      </div>

      <!-- HISTORIAL + GR√ÅFICO -->
      <div class="row g-4 col-md-6 col-sm-12">
          <div class="card shadow-sm">
            <div class="card-body">
              <canvas id="grafico"></canvas>
            </div>
        </div>
      </div>
    </div>

    </div>

    <div class="tab-pane fade" id="historial" role="tabpanel">
        <div class="row g-3">
          <div class="col-md-4 rounded-2 border bg-white p-3">
            <h6>Ingresos</h6>
            <ul id="lista-ingresos" class="list-group"></ul>
          </div>

          <div class="col-md-4 rounded-2 border bg-white p-3">
            <h6>Costos</h6>
            <ul id="lista-costos" class="list-group"></ul>
          </div>

          <div class="col-md-4 rounded-2 border bg-white p-3">
            <h6>Ahorros</h6>
            <ul id="lista-ahorros" class="list-group"></ul>
          </div>
        </div>
    </div>

    <div class="tab-pane fade" id="config" role="tabpanel">
      <!-- OBJETIVO DE AHORRO -->
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="mb-3">üéØ Objetivo de ahorro <span class="text-muted" data-bs-toggle="tooltip" title="Ponte un objetivo de ahorro cada x tiempo" style="cursor: pointer;">‚ÑπÔ∏è</span></h5>

          <div class="row g-2 mb-3">
            <div class="col-md-4">
              <input
                type="number"
                id="objetivo-input"
                class="form-control"
                placeholder="Monto objetivo"
              >
            </div>

            <div class="col-md-4">
              <select id="periodo-objetivo" class="form-select">
                <option value="mensual">Mensual</option>
                <option value="trimestral">Trimestral</option>
                <option value="anual">Anual</option>
              </select>
            </div>

            <div class="col-md-4 d-grid">
              <button id="guardar-objetivo" class="btn btn-success">
                Guardar objetivo
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- CREAR CATEGORIA -->
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h5 class="mb-3">üè∑Ô∏è Categor√≠as <span class="text-muted" data-bs-toggle="tooltip" title="Crea tus categorias para ordenar mejor tus finanzas" style="cursor: pointer;">‚ÑπÔ∏è</span></h5>

          <div class="d-flex gap-2 mb-3">
            <input type="text" id="nueva-categoria" class="form-control" placeholder="Nueva categor√≠a" >
            <button id="agregar-categoria" class="btn btn-outline-primary">
              Agregar
            </button>
          </div>

          <ul id="lista-categorias" class="list-group"></ul>
        </div>
      </div>

      <div class="card shadow-sm mb-4">
        <ul id="mostrar-categorias">

        </ul>
      </div>
    </div>
  </div>
</div>

<!-- MODAL LOGOUT -->
<div class="modal fade" id="logoutModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-body text-center">
        <p>¬øCerrar sesi√≥n?</p>
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button id="confirmLogout" class="btn btn-danger">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<script type="module" src="./scripts/app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
